"use strict";function getTranslateX(e){return $support.transform3d?"translate3d("+e+"px, 0, 0)":"translate("+e+"px, 0)"}function getTranslateY(e){return $support.transform3d?"translate3d(0,"+e+"px, 0)":"translate(0,"+e+"px)"}function getPage(e,t){return $support.touch?e.changedTouches[0][t]:e[t]}var $support={transform3d:"WebKitCSSMatrix"in window,touch:"ontouchstart"in window},$E={start:$support.touch?"touchstart":"mousedown",move:$support.touch?"touchmove":"mousemove",end:$support.touch?"touchend":"mouseup",cancel:$support.touch?"touchcancel":"",transEnd:"webkitTransitionEnd"},Slide=function(e,t,n,r,o){var a=this;return a._locked=r,a.endFun=n||null,a.transEnd=o||null,a.nodes=[],a.dir=t||"H",e.nodeType&&1==e.nodeType?a.element=e:"string"==typeof e&&(a.id=e,a.element=document.getElementById(e)||document.querySelector(e)),a._vendor=window.navigator.userAgent.indexOf("Android 4.")>=0,"H"==a.dir?a.element.style.webkitTransform=getTranslateX(0):a.element.style.webkitTransform=getTranslateY(0),a.conf={},a.touchEnabled=!0,a.currentPoint=0,a.currentXY=0,a.refresh(),a.element.parentNode.addEventListener($E.start,a,!1),a.element.parentNode.addEventListener($E.move,a,!1),a.element.addEventListener($E.transEnd,a,!1),""!=$E.cancel&&(a.element.addEventListener($E.cancel,a,!1),document.addEventListener($E.cancel,a,!1)),document.addEventListener($E.end,a,!1),a};Slide.prototype={handleEvent:function(e){var t=this;switch(e.type){case $E.start:t._touchStart(e);break;case $E.move:t._touchMove(e);break;case $E.end:case $E.cancel:t._touchEnd(e);break;case"click":t._click(e);break;case $E.transEnd:t.transEnd&&t.transEnd(e)}},addSection:function(e){var t=this;t.element.appendChild(e),t.refresh()},getSection:function(e){var t=this,n=t.nodes[e];return n.childNodes[1]&&n.childNodes[1].childNodes[1]?n.childNodes[1].childNodes[1].childNodes[1]:n},refresh:function(){var e=this,t=e.conf;e.maxPoint=t.point||function(){for(var t,n=e.element.childNodes,r=0,o=0,a=n.length;o<a;o++)t=n[o],1===t.nodeType&&(e.nodes[r]=t,r++);return r>0&&r--,r}(),"H"==e.dir?e.distance=parseInt(t.distance||window.getComputedStyle(e.element,null).width):e.distance=parseInt(t.distance||window.getComputedStyle(e.element,null).height),e.maxXY=t.maxXY?-t.maxXY:-e.distance*e.maxPoint,e.moveToPoint(e.currentPoint)},hasNext:function(){var e=this;return e.currentPoint<e.maxPoint},hasPrev:function(){return this.currentPoint>0},toNext:function(){var e=this;e.hasNext()&&e.moveToPoint(e.currentPoint+1)},toPrev:function(){var e=this;e.hasPrev()&&e.moveToPoint(e.currentPoint-1)},moveToPoint:function(e){var t=this;t.currentPoint=e<0?0:e>t.maxPoint?t.maxPoint:parseInt(e),t.element.style.webkitTransitionDuration="500ms",t._setXY(-t.currentPoint*t.distance);var n=document.createEvent("Event");n.initEvent("css3flip.moveend",!0,!1),t.element.dispatchEvent(n)},_setXY:function(e){var t=this;t.currentXY=e,"H"==t.dir?t.element.style.webkitTransform=getTranslateX(e):t.element.style.webkitTransform=getTranslateY(e)},_touchStart:function(e){var t=this;t._locked&&(e.preventDefault(),e.stopPropagation()),t.touchEnabled&&($support.touch||e.preventDefault(),t.element.style.webkitTransitionDuration="0",t.scrolling=!0,t.moveReady=!1,t.startPageX=getPage(e,"pageX"),t.startPageY=getPage(e,"pageY"),"H"==t.dir?t.basePage=t.startPageX:t.basePage=t.startPageY,t.direction=0,t.startTime=e.timeStamp)},_touchMove:function(e){var t=this;if(t._locked&&(e.preventDefault(),e.stopPropagation()),t.scrolling){var n,r,o,a,i=getPage(e,"pageX"),s=getPage(e,"pageY");t.moveReady||(o=Math.abs(i-t.startPageX),a=Math.abs(s-t.startPageY),"H"==t.dir?o>a&&o>5?(t._vendor&&e.preventDefault(),t.moveReady=!0,t.element.parentNode.addEventListener("click",t,!0)):a>5&&(t.scrolling=!1):a>o&&a>5?(t._vendor&&e.preventDefault(),t.moveReady=!0,t.element.parentNode.addEventListener("click",t,!0)):o>5&&(t.scrolling=!1)),t.moveReady&&(n="H"==t.dir?i-t.basePage:s-t.basePage,r=t.currentXY+n,(r>=0||r<t.maxXY)&&(r=Math.round(t.currentXY+n/3)),t._setXY(r),t.direction=n>0?-1:1),"H"==t.dir?t.basePage=i:t.basePage=s}},_touchEnd:function(e){var t=this;if(t._locked&&(e.preventDefault(),e.stopPropagation()),t.scrolling){t.scrolling=!1;var n=-t.currentXY/t.distance;n=t.direction>0?Math.ceil(n):t.direction<0?Math.floor(n):Math.round(n),t.moveToPoint(n),setTimeout(function(){t.element.parentNode.removeEventListener("click",t,!0)},200),t.endFun&&t.endFun()}},_click:function(e){e.stopPropagation(),e.preventDefault()},destroy:function(){var e=this;e.element.parentNode.removeEventListener($E.start,e),e.element.parentNode.removeEventListener($E.move,e),e.element.parentNode.removeEventListener($E.transEnd,e),e.element.parentNode.removeEventListener($E.cancel,e),document.removeEventListener($E.end,e),document.removeEventListener($E.cancel,e)}};